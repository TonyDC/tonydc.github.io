(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(t,e,i){t.exports=i(23)},,,,,,function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var a=i(1),o=i.n(a),n=i(10),s=i.n(n),h=(i(18),i(19),i(6)),r=i(3),l=i(4),c=i(7),d=i(5),u=i(8),p=i(0),m=i(11),v=i(2),b={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},f={type:"change"},y={type:"start"},E={type:"end"},g=function(t){function e(t,i,a){var o;return Object(r.a)(this,e),(o=Object(c.a)(this,Object(d.a)(e).call(this))).object=void 0,o.domElement=void 0,o.window=void 0,o.enabled=void 0,o.target=void 0,o.enableZoom=void 0,o.zoomSpeed=void 0,o.minDistance=void 0,o.maxDistance=void 0,o.enableRotate=void 0,o.rotateSpeed=void 0,o.enablePan=void 0,o.keyPanSpeed=void 0,o.autoRotate=void 0,o.autoRotateSpeed=void 0,o.minZoom=void 0,o.maxZoom=void 0,o.minPolarAngle=void 0,o.maxPolarAngle=void 0,o.minAzimuthAngle=void 0,o.maxAzimuthAngle=void 0,o.enableKeys=void 0,o.keys=void 0,o.mouseButtons=void 0,o.enableDamping=void 0,o.dampingFactor=void 0,o.spherical=void 0,o.sphericalDelta=void 0,o.scale=void 0,o.target0=void 0,o.position0=void 0,o.zoom0=void 0,o.state=void 0,o.panOffset=void 0,o.zoomChanged=void 0,o.rotateStart=void 0,o.rotateEnd=void 0,o.rotateDelta=void 0,o.panStart=void 0,o.panEnd=void 0,o.panDelta=void 0,o.dollyStart=void 0,o.dollyEnd=void 0,o.dollyDelta=void 0,o.updateLastPosition=void 0,o.updateOffset=void 0,o.updateQuat=void 0,o.updateLastQuaternion=void 0,o.updateQuatInverse=void 0,o.panLeftV=void 0,o.panUpV=void 0,o.panInternalOffset=void 0,o.object=t,o.domElement=void 0!==i?i:document,o.window=void 0!==a?a:window,o.enabled=!0,o.target=new p.Vector3,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.25,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.enableKeys=!0,o.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},o.mouseButtons={ORBIT:p.MOUSE.LEFT,ZOOM:p.MOUSE.MIDDLE,PAN:p.MOUSE.RIGHT},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o.updateOffset=new p.Vector3,o.updateQuat=(new p.Quaternion).setFromUnitVectors(t.up,new p.Vector3(0,1,0)),o.updateQuatInverse=o.updateQuat.clone().inverse(),o.updateLastPosition=new p.Vector3,o.updateLastQuaternion=new p.Quaternion,o.state=b.NONE,o.scale=1,o.spherical=new p.Spherical,o.sphericalDelta=new p.Spherical,o.panOffset=new p.Vector3,o.zoomChanged=!1,o.rotateStart=new p.Vector2,o.rotateEnd=new p.Vector2,o.rotateDelta=new p.Vector2,o.panStart=new p.Vector2,o.panEnd=new p.Vector2,o.panDelta=new p.Vector2,o.dollyStart=new p.Vector2,o.dollyEnd=new p.Vector2,o.dollyDelta=new p.Vector2,o.panLeftV=new p.Vector3,o.panUpV=new p.Vector3,o.panInternalOffset=new p.Vector3,o.domElement.addEventListener("contextmenu",o.onContextMenu.bind(Object(v.a)(o)),!1),o.domElement.addEventListener("mousedown",o.onMouseDown.bind(Object(v.a)(o)),!1),o.domElement.addEventListener("wheel",o.onMouseWheel.bind(Object(v.a)(o)),!1),o.domElement.addEventListener("touchstart",o.onTouchStart.bind(Object(v.a)(o)),!1),o.domElement.addEventListener("touchend",o.onTouchEnd.bind(Object(v.a)(o)),!1),o.domElement.addEventListener("touchmove",o.onTouchMove.bind(Object(v.a)(o)),!1),o.window.addEventListener("keydown",o.onKeyDown.bind(Object(v.a)(o)),!1),o.initialize(),o.update(),o}return Object(u.a)(e,t),Object(l.a)(e,[{key:"initialize",value:function(){this.maxPolarAngle=Math.PI,this.minPolarAngle=0,this.minDistance=0,this.maxDistance=1/0,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.enableDamping=!1,this.dampingFactor=.25}},{key:"onMouseDown",value:function(t){if(t instanceof MouseEvent&&!1!==this.enabled){if(t.preventDefault(),t.button===this.mouseButtons.ORBIT){if(!1===this.enableRotate)return;this.rotateStart.set(t.clientX,t.clientY),this.state=b.ROTATE}else if(t.button===this.mouseButtons.ZOOM){if(!1===this.enableZoom)return;this.dollyStart.set(t.clientX,t.clientY),this.state=b.DOLLY}else if(t.button===this.mouseButtons.PAN){if(!1===this.enablePan)return;this.panStart.set(t.clientX,t.clientY),this.state=b.PAN}this.state!==b.NONE&&(document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("mouseup",this.onMouseUp.bind(this),!1),this.dispatchEvent(y))}}},{key:"onMouseMove",value:function(t){if(t instanceof MouseEvent&&!1!==this.enabled)if(t.preventDefault(),this.state===b.ROTATE){if(!1===this.enableRotate)return;this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart);var e=this.domElement===document?this.domElement.body:this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/e.clientWidth*this.rotateSpeed),this.rotateUp(2*Math.PI*this.rotateDelta.y/e.clientHeight*this.rotateSpeed),this.rotateStart.copy(this.rotateEnd),this.update()}else if(this.state===b.DOLLY){if(!1===this.enableZoom)return;this.dollyEnd.set(t.clientX,t.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyIn(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyOut(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}else if(this.state===b.PAN){if(!1===this.enablePan)return;this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd),this.update()}}},{key:"onMouseUp",value:function(t){t instanceof MouseEvent&&!1!==this.enabled&&(document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.dispatchEvent(E),this.state=b.NONE)}},{key:"onMouseWheel",value:function(t){t instanceof WheelEvent&&(!1===this.enabled||!1===this.enableZoom||this.state!==b.NONE&&this.state!==b.ROTATE||(t.preventDefault(),t.stopPropagation(),t.deltaY<0?this.dollyOut(this.getZoomScale()):t.deltaY>0&&this.dollyIn(this.getZoomScale()),this.update(),this.dispatchEvent(y),this.dispatchEvent(E)))}},{key:"onKeyDown",value:function(t){if(t instanceof KeyboardEvent&&!1!==this.enabled&&!1!==this.enableKeys&&!1!==this.enablePan)switch(t.keyCode){case this.keys.UP:this.pan(0,this.keyPanSpeed),this.update();break;case this.keys.BOTTOM:this.pan(0,-this.keyPanSpeed),this.update();break;case this.keys.LEFT:this.pan(this.keyPanSpeed,0),this.update();break;case this.keys.RIGHT:this.pan(-this.keyPanSpeed,0),this.update()}}},{key:"onTouchStart",value:function(t){if(t instanceof TouchEvent&&!1!==this.enabled){switch(t.touches.length){case 1:if(!1===this.enableRotate)return;this.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),this.state=b.TOUCH_ROTATE;break;case 2:if(!1===this.enableZoom)return;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(e*e+i*i);this.dollyStart.set(0,a),this.state=b.TOUCH_DOLLY;break;case 3:if(!1===this.enablePan)return;this.panStart.set(t.touches[0].pageX,t.touches[0].pageY),this.state=b.TOUCH_PAN;break;default:this.state=b.NONE}this.state!==b.NONE&&this.dispatchEvent(y)}}},{key:"onTouchMove",value:function(t){if(t instanceof TouchEvent&&!1!==this.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===this.enableRotate)return;if(this.state!==b.TOUCH_ROTATE)return;this.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart);var e=this.domElement===document?this.domElement.body:this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/e.clientWidth*this.rotateSpeed),this.rotateUp(2*Math.PI*this.rotateDelta.y/e.clientHeight*this.rotateSpeed),this.rotateStart.copy(this.rotateEnd),this.update();break;case 2:if(!1===this.enableZoom)return;if(this.state!==b.TOUCH_DOLLY)return;var i=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(i*i+a*a);this.dollyEnd.set(0,o),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update();break;case 3:if(!1===this.enablePan)return;if(this.state!==b.TOUCH_PAN)return;this.panEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.panDelta.subVectors(this.panEnd,this.panStart),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd),this.update();break;default:this.state=b.NONE}}},{key:"onTouchEnd",value:function(t){t instanceof TouchEvent&&!1!==this.enabled&&(this.dispatchEvent(E),this.state=b.NONE)}},{key:"onContextMenu",value:function(t){t.preventDefault()}},{key:"update",value:function(){var t=this.object.position;return this.updateOffset.copy(t).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&this.state===b.NONE&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),t.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>1e-6)&&(this.dispatchEvent(f),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)}},{key:"panLeft",value:function(t,e){this.panLeftV.setFromMatrixColumn(e,0),this.panLeftV.multiplyScalar(-t),this.panOffset.add(this.panLeftV)}},{key:"panUp",value:function(t,e){this.panUpV.setFromMatrixColumn(e,1),this.panUpV.multiplyScalar(t),this.panOffset.add(this.panUpV)}},{key:"pan",value:function(t,i){var a=this.domElement===document?this.domElement.body:this.domElement;if(e.checkPerspectiveCamera(this.object)){var o=this.object.position;this.panInternalOffset.copy(o).sub(this.target);var n=this.panInternalOffset.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*t*n/a.clientHeight,this.object.matrix),this.panUp(2*i*n/a.clientHeight,this.object.matrix)}else e.checkOrthographicCamera(this.object)?(this.panLeft(t*(this.object.right-this.object.left)/this.object.zoom/a.clientWidth,this.object.matrix),this.panUp(i*(this.object.top-this.object.bottom)/this.object.zoom/a.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}},{key:"dollyIn",value:function(t){e.checkPerspectiveCamera(this.object)?this.scale/=t:e.checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}},{key:"dollyOut",value:function(t){e.checkPerspectiveCamera(this.object)?this.scale*=t:e.checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}},{key:"getAutoRotationAngle",value:function(){return 2*Math.PI/3600*this.autoRotateSpeed}},{key:"getZoomScale",value:function(){return Math.pow(.95,this.zoomSpeed)}},{key:"rotateLeft",value:function(t){this.sphericalDelta.theta-=t}},{key:"rotateUp",value:function(t){this.sphericalDelta.phi-=t}},{key:"getPolarAngle",value:function(){return this.spherical.phi}},{key:"getAzimuthalAngle",value:function(){return this.spherical.theta}},{key:"dispose",value:function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)}},{key:"reset",value:function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(f),this.update(),this.state=b.NONE}},{key:"saveState",value:function(){this.target0.copy(this.target),this.position0.copy(this.object.position),(e.checkOrthographicCamera(this.object)||e.checkPerspectiveCamera(this.object))&&(this.zoom0=this.object.zoom)}},{key:"center",get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},{key:"noZoom",get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}}],[{key:"checkPerspectiveCamera",value:function(t){return t.isPerspectiveCamera}},{key:"checkOrthographicCamera",value:function(t){return t.isOrthographicCamera}}]),e}(p.EventDispatcher),O=function(){function t(){Object(r.a)(this,t),this.targetEl=void 0,this.renderer=new p.WebGLRenderer,this.scene=new p.Scene,this.camera=void 0,this.controls=void 0,this.potree=new m.Potree,this.pointClouds=[],this.prevTime=void 0,this.reqAnimationFrameHandle=void 0,this.camera=new p.PerspectiveCamera(45,NaN,.1,1e3),this.camera.position.x=5,this.camera.position.y=5,this.camera.position.z=5,this.controls=new g(this.camera,this.renderer.domElement)}return Object(l.a)(t,[{key:"showAxesHelper",value:function(){this.scene.add(new p.AxesHelper(1))}},{key:"initialize",value:function(t){!this.targetEl&&t&&(this.targetEl=t,t.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",this.resize.bind(this)),requestAnimationFrame(this.loop.bind(this)))}},{key:"destroy",value:function(){this.targetEl&&(this.targetEl.removeChild(this.renderer.domElement),this.targetEl=void 0,window.removeEventListener("resize",this.resize.bind(this)),void 0!==this.reqAnimationFrameHandle&&cancelAnimationFrame(this.reqAnimationFrameHandle))}},{key:"clean",value:function(){this.scene=new p.Scene,this.pointClouds=[]}},{key:"load",value:function(t,e){var i=this;return this.potree.loadPointCloud(t,function(t){return"".concat(e).concat(t)}).then(function(t){t.translateX(-t.position.x),t.translateY(-t.position.y),t.translateZ(-t.position.z),t.translateZ(t.boundingBox.max.z),t.rotateX(-Math.PI/2),i.scene.add(t),i.pointClouds.push(t)})}},{key:"update",value:function(t){this.potree.updatePointClouds(this.pointClouds,this.camera,this.renderer)}},{key:"render",value:function(){this.renderer.clear(),this.renderer.render(this.scene,this.camera)}},{key:"loop",value:function(t){this.reqAnimationFrameHandle=requestAnimationFrame(this.loop.bind(this));var e=this.prevTime;this.prevTime=t,void 0!==e&&(this.update(t-e),this.render())}},{key:"resize",value:function(){if(this.targetEl){var t=this.targetEl.getBoundingClientRect(),e=t.width,i=t.height;this.camera.aspect=e/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,i)}}}]),t}(),w=(i(20),function(t){function e(t){var i;return Object(r.a)(this,e),(i=Object(c.a)(this,Object(d.a)(e).call(this,t))).viewerRef=void 0,i.potreeViewer=void 0,i.state={},i.viewerRef=o.a.createRef(),i.potreeViewer=new O,i}return Object(u.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.potreeViewer.initialize(this.viewerRef.current);var t=this.props.path;this.loadCloud(t)}},{key:"componentDidUpdate",value:function(t){var e=t.path,i=this.props.path;e!==i&&(this.potreeViewer.clean(),this.loadCloud(i))}},{key:"loadCloud",value:function(t){this.potreeViewer.load("cloud.js",t).catch(function(t){return console.error(t)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"viewer-wrapper",ref:this.viewerRef})}}]),e}(o.a.Component)),k=(i(21),function(t){var e=t.label,i=t.options,n=t.callback,s=Object(a.useState)(i[0].path||""),r=Object(h.a)(s,2),l=r[0],c=r[1];return o.a.createElement("label",{className:"cloud-selector"},e,o.a.createElement("select",{value:l,onChange:function(t){var e=t.target;c(e.value),n(e.value)}},i.map(function(t,e){var i=t.name,a=t.path;return o.a.createElement("option",{key:e,value:a},i)})))}),j=(i(22),[{name:"Lion",path:"https://cdn.rawgit.com/potree/potree/develop/pointclouds/lion_takanawa/"},{name:"Volume total",path:"https://cdn.rawgit.com/potree/potree/develop/pointclouds/vol_total/"}]),S=function(){var t=Object(a.useState)(j[0].path),e=Object(h.a)(t,2),i=e[0],n=e[1];return o.a.createElement("div",{className:"ViewerPage"},o.a.createElement(k,{label:"Clouds:",options:j,callback:function(t){return n(t)}}),o.a.createElement(w,{path:i}))},D=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.f4f2708b.chunk.js.map